<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø«Ø§Ù†ÙˆÙŠØ© Ø§Ù„Ø¹Ø§Ù…Ø©</title>
    <style>
        :root {
            --primary: #4e54c8;
            --secondary: #8f94fb;
            --success: #27ae60;
        }
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background: linear-gradient(135deg, #4e54c8, #8f94fb);
            min-height: 100vh; margin: 0; display: flex; justify-content: center; align-items: center;
        }
        .container {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px; border-radius: 20px; box-shadow: 0 15px 35px rgba(0,0,0,0.2);
            width: 95%; max-width: 600px; text-align: center; animation: fadeIn 0.8s ease;
        }
        h2 { color: var(--primary); margin-bottom: 20px; }
        .search-box { display: flex; gap: 10px; margin-bottom: 30px; justify-content: center; }
        input { 
            padding: 12px; width: 60%; border: 2px solid #ddd; border-radius: 10px; 
            font-size: 16px; outline: none; transition: 0.3s;
        }
        input:focus { border-color: var(--primary); }
        button { 
            padding: 12px 25px; background: var(--primary); color: white; border: none; 
            border-radius: 10px; cursor: pointer; font-size: 16px; font-weight: bold;
        }
        button:hover { background: #3a40ac; transform: translateY(-2px); }

        /* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø¬Ø¯ÙˆÙ„ */
        .result-section { display: none; margin-top: 20px; border-top: 2px solid #eee; padding-top: 20px; }
        .student-header { background: #f0f2f5; padding: 15px; border-radius: 10px; margin-bottom: 20px; }
        .student-header h3 { margin: 5px 0; color: #333; }
        
        table { width: 100%; border-collapse: collapse; margin-top: 10px; overflow: hidden; border-radius: 10px; }
        th { background: var(--primary); color: white; padding: 12px; }
        td { padding: 12px; border: 1px solid #eee; background: white; }
        tr:nth-child(even) td { background: #f9f9f9; }
        .total-row { font-weight: bold; background: #e8f5e9 !important; color: var(--success); }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="container">
    <h2>ğŸ“ Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù… Ø¹Ù† Ø§Ù„Ù†ØªÙŠØ¬Ø©</h2>
    <div class="search-box">
        <input type="text" id="seatNumberInput" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ø¬Ù„ÙˆØ³ Ù‡Ù†Ø§...">
        <button onclick="searchResult()">Ø¨Ø­Ø«</button>
    </div>

    <div id="loading" style="display:none;">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø«...</div>

    <div id="resultSection" class="result-section">
        <div class="student-header">
            <h3 id="displayName"></h3>
            <p id="displaySeat"></p>
        </div>
        <table>
            <thead>
                <tr>
                    <th>Ø§Ù„Ù…Ø§Ø¯Ø©</th>
                    <th>Ø§Ù„Ø¯Ø±Ø¬Ø©</th>
                </tr>
            </thead>
            <tbody id="tableBody">
                </tbody>
        </table>
    </div>
</div>

<script>
    const sheetUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTyPb3Mc0FJmGcWONu5zLtN2Sb8a9etmmydAUc4qJT8-4KW1kb0g2HUJ8wRLdI40-921ajLZcoGR-VX/pub?output=csv';

    async function searchResult() {
        const seatNo = document.getElementById('seatNumberInput').value.trim();
        if (!seatNo) { alert("Ù…Ù† ÙØ¶Ù„Ùƒ Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ø¬Ù„ÙˆØ³"); return; }

        document.getElementById('loading').style.display = 'block';
        document.getElementById('resultSection').style.display = 'none';

        try {
            const response = await fetch(sheetUrl);
            const data = await response.text();
            
            // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù€ CSV Ø¥Ù„Ù‰ Ù…ØµÙÙˆÙØ© Ø¨ÙŠØ§Ù†Ø§Øª
            const rows = data.split('\n').map(row => row.split(','));
            const headers = rows[0]; // Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† (Ø±Ù‚Ù… Ø§Ù„Ø¬Ù„ÙˆØ³ØŒ Ø§Ù„Ø§Ø³Ù…ØŒ Ø§Ù„Ù…ÙˆØ§Ø¯...)
            
            // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø·Ø§Ù„Ø¨ Ø¨Ø±Ù‚Ù… Ø§Ù„Ø¬Ù„ÙˆØ³ (Ø¨ÙØ±Ø¶ Ø£Ù†Ù‡ ÙÙŠ Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø£ÙˆÙ„)
            const studentData = rows.find(row => row[0].trim() === seatNo);

            if (studentData) {
                displayData(headers, studentData);
            } else {
                alert("Ø¹ÙÙˆØ§Ù‹ØŒ Ø±Ù‚Ù… Ø§Ù„Ø¬Ù„ÙˆØ³ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯.");
            }
        } catch (error) {
            console.error("Error fetching data:", error);
            alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.");
        }
        document.getElementById('loading').style.display = 'none';
    }

    function displayData(headers, student) {
        const tableBody = document.getElementById('tableBody');
        tableBody.innerHTML = ""; // Ù…Ø³Ø­ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©
        
        document.getElementById('displayName').innerText = "Ø§Ù„Ø·Ø§Ù„Ø¨: " + student[1]; // Ø§Ù„Ø§Ø³Ù… ÙÙŠ Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø«Ø§Ù†ÙŠ
        document.getElementById('displaySeat').innerText = "Ø±Ù‚Ù… Ø§Ù„Ø¬Ù„ÙˆØ³: " + student[0];

        // Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆØ§Ø¯ (Ù…Ù† Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø«Ø§Ù„Ø« Ù„Ù„Ø£Ø®ÙŠØ±)
        for (let i = 2; i < headers.length; i++) {
            if(headers[i].trim() === "") continue;
            
            const tr = document.createElement('tr');
            // ØªÙ…ÙŠÙŠØ² Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ Ø¨Ù„ÙˆÙ† Ù…Ø®ØªÙ„Ù
            if (headers[i].includes("Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹")) tr.className = "total-row";
            
            tr.innerHTML = `<td>${headers[i]}</td><td>${student[i]}</td>`;
            tableBody.appendChild(tr);
        }

        document.getElementById('resultSection').style.display = 'block';
    }
</script>

</body>
                </html>
